<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Music Notes - Fun Learning World</title>
    <style>
        body {
            font-family: 'Comic Sans MS', cursive, sans-serif;
            background-color: #e6f7ff;
            margin: 0;
            padding: 0;
        }
        
        .header {
            background-color: #a0e7e5;
            padding: 15px;
            text-align: center;
            border-radius: 0 0 20px 20px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .header h1 {
            color: #6a4c93;
            font-size: 2.5em;
            margin: 0;
        }
        
        .container {
            max-width: 900px;
            margin: 20px auto;
            padding: 20px;
        }
        
        .activities {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center;
            margin-bottom: 30px;
        }
        
        .activity-card {
            background-color: #b4f8c8;
            width: 200px;
            height: 200px;
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: transform 0.3s;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .activity-card:hover {
            transform: scale(1.05);
        }
        
        .activity-card img {
            width: 80px;
            height: 80px;
            margin-bottom: 10px;
        }
        
        .activity-card p {
            font-size: 1.2em;
            font-weight: bold;
            color: #6a4c93;
            text-align: center;
            margin: 0;
        }
        
        .activity-content {
            background-color: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            display: none;
        }
        
        .activity-content h2 {
            color: #6a4c93;
            text-align: center;
            margin-top: 0;
        }
        
        .piano-container {
            display: flex;
            justify-content: center;
            margin: 20px 0;
        }
        
        .piano {
            display: flex;
            position: relative;
            width: fit-content;
        }
        
        .white-key {
            width: 60px;
            height: 200px;
            background-color: white;
            border: 1px solid #666;
            border-radius: 0 0 5px 5px;
            position: relative;
            z-index: 1;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            padding-bottom: 10px;
            font-weight: bold;
            color: #333;
            cursor: pointer;
        }
        
        .black-key {
            width: 40px;
            height: 120px;
            background-color: #333;
            position: absolute;
            border-radius: 0 0 5px 5px;
            z-index: 2;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            padding-bottom: 10px;
            font-weight: bold;
            color: white;
            cursor: pointer;
        }
        
        .active {
            background-color: #a0e7e5;
        }
        
        .note-display {
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2em;
            color: #6a4c93;
            margin: 20px 0;
        }
        
        .staff-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 20px 0;
        }
        
        .staff {
            position: relative;
            width: 400px;
            height: 160px;
            margin: 20px 0;
        }
        
        .staff-line {
            position: absolute;
            width: 100%;
            height: 2px;
            background-color: #333;
        }
        
        .staff-line:nth-child(1) { top: 0; }
        .staff-line:nth-child(2) { top: 40px; }
        .staff-line:nth-child(3) { top: 80px; }
        .staff-line:nth-child(4) { top: 120px; }
        .staff-line:nth-child(5) { top: 160px; }
        
        .note {
            position: absolute;
            width: 30px;
            height: 20px;
            background-color: #333;
            border-radius: 50%;
            transform: rotate(-20deg);
        }
        
        .instrument-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center;
            margin: 20px 0;
        }
        
        .instrument {
            background-color: #ffd6a5;
            width: 120px;
            height: 120px;
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: transform 0.3s;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .instrument:hover {
            transform: scale(1.05);
        }
        
        .instrument img {
            width: 60px;
            height: 60px;
            margin-bottom: 10px;
        }
        
        .instrument p {
            font-size: 1em;
            font-weight: bold;
            color: #6a4c93;
            text-align: center;
            margin: 0;
        }
        
        .quiz-container {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .quiz-question {
            font-size: 1.5em;
            margin: 20px 0;
            color: #6a4c93;
            text-align: center;
        }
        
        .quiz-options {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center;
            margin: 20px 0;
        }
        
        .quiz-option {
            background-color: #fdffb6;
            padding: 15px 30px;
            border-radius: 10px;
            cursor: pointer;
            transition: background-color 0.3s;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            font-size: 1.2em;
            color: #6a4c93;
        }
        
        .quiz-option:hover {
            background-color: #6a4c93;
            color: white;
        }
        
        .quiz-result {
            font-size: 1.5em;
            margin: 20px 0;
            font-weight: bold;
        }
        
        .correct {
            color: green;
        }
        
        .incorrect {
            color: red;
        }
        
        button {
            background-color: #9bf6ff;
            border: none;
            padding: 10px 20px;
            border-radius: 10px;
            font-size: 1.2em;
            cursor: pointer;
            color: #6a4c93;
            font-weight: bold;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            transition: background-color 0.3s;
            margin: 10px;
        }
        
        button:hover {
            background-color: #6a4c93;
            color: white;
        }
        
        .back-button {
            display: block;
            margin: 20px auto;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Music Notes</h1>
    </div>
    
    <div class="container">
        <div class="activities">
            <div class="activity-card" onclick="showActivity('piano')">
                <img src="assets/images/piano.png" alt="Piano Keys">
                <p>Piano Keys</p>
            </div>
            <div class="activity-card" onclick="showActivity('notes')">
                <img src="assets/images/music notes.png" alt="Music Notes">
                <p>Music Notes</p>
            </div>
            <div class="activity-card" onclick="showActivity('instruments')">
                <img src="assets/images/instruments.png" alt="Instruments">
                <p>Instruments</p>
            </div>
            <div class="activity-card" onclick="showActivity('quiz')">
                <img src="assets/images/music notes.png" alt="Music Quiz">
                <p>Music Quiz</p>
            </div>
        </div>
        
        <div id="piano-activity" class="activity-content">
            <h2>Learn Piano Keys</h2>
            <p style="text-align: center;">Click on the piano keys to hear their sounds!</p>
            
            <div class="piano-container">
                <div class="piano">
                    <div class="white-key" data-note="C" onclick="playNote('C')">C</div>
                    <div class="black-key" style="left: 40px;" data-note="C#" onclick="playNote('C#')">C#</div>
                    <div class="white-key" data-note="D" onclick="playNote('D')">D</div>
                    <div class="black-key" style="left: 100px;" data-note="D#" onclick="playNote('D#')">D#</div>
                    <div class="white-key" data-note="E" onclick="playNote('E')">E</div>
                    <div class="white-key" data-note="F" onclick="playNote('F')">F</div>
                    <div class="black-key" style="left: 220px;" data-note="F#" onclick="playNote('F#')">F#</div>
                    <div class="white-key" data-note="G" onclick="playNote('G')">G</div>
                    <div class="black-key" style="left: 280px;" data-note="G#" onclick="playNote('G#')">G#</div>
                    <div class="white-key" data-note="A" onclick="playNote('A')">A</div>
                    <div class="black-key" style="left: 340px;" data-note="A#" onclick="playNote('A#')">A#</div>
                    <div class="white-key" data-note="B" onclick="playNote('B')">B</div>
                </div>
            </div>
            
            <div class="note-display">
                <p id="note-display">Click a key!</p>
            </div>
            
            <div style="text-align: center;">
                <button onclick="playSong('Twinkle')">Play Twinkle Twinkle</button>
                <button onclick="playSong('Mary')">Play Mary Had a Little Lamb</button>
            </div>
            
            <button class="back-button" onclick="backToActivities()">Back to Activities</button>
            <button class="nav-button" onclick="window.location.href='index.html'">Home</button>
        </div>
        
        <div id="notes-activity" class="activity-content">
            <h2>Learn Music Notes</h2>
            <p style="text-align: center;">Learn where music notes are placed on the staff!</p>
            
            <div class="staff-container">
                <div class="staff">
                    <div class="staff-line"></div>
                    <div class="staff-line"></div>
                    <div class="staff-line"></div>
                    <div class="staff-line"></div>
                    <div class="staff-line"></div>
                    
                    <!-- Notes will be added here by JavaScript -->
                </div>
                
                <button onclick="showRandomNote()">Show Random Note</button>
                
                <div class="note-display">
                    <p id="staff-note-display">Click the button to see a note!</p>
                </div>
            </div>
            
            <button class="back-button" onclick="backToActivities()">Back to Activities</button>
        </div>
        
        <div id="instruments-activity" class="activity-content">
            <h2>Learn Musical Instruments</h2>
            <p style="text-align: center;">Click on an instrument to learn about it!</p>
            
            <div class="instrument-container">
                <div class="instrument" onclick="showInstrumentInfo('piano')">
                    <img src="assets/images/piano.png" alt="Piano">
                    <p>Piano</p>
                </div>
                <div class="instrument" onclick="showInstrumentInfo('guitar')">
                    <img src="assets/images/guiter.png" alt="Guitar">
                    <p>Guitar</p>
                </div>
                <div class="instrument" onclick="showInstrumentInfo('violin')">
                    <img src="assets/images/violin.png" alt="Violin">
                    <p>Violin</p>
                </div>
                <div class="instrument" onclick="showInstrumentInfo('drums')">
                    <img src="assets/images/drums.png" alt="Drums">
                    <p>Drums</p>
                </div>
                <div class="instrument" onclick="showInstrumentInfo('flute')">
                    <img src="assets/images/flute.png" alt="Flute">
                    <p>Flute</p>
                </div>
                <div class="instrument" onclick="showInstrumentInfo('trumpet')">
                    <img src="assets/images/trumpets.png" alt="Trumpet">
                    <p>Trumpet</p>
                </div>
            </div>
            
            <div class="note-display" style="height: 120px;">
                <p id="instrument-info-display">Click an instrument to learn about it!</p>
            </div>
            
            <button class="back-button" onclick="backToActivities()">Back to Activities</button>
        </div>
        
        <div id="quiz-activity" class="activity-content">
            <h2>Music Quiz</h2>
            <p style="text-align: center;">Test your music knowledge!</p>
            
            <div class="quiz-container">
                <div class="quiz-question" id="quiz-question">
                    Which of these is NOT a music note?
                </div>
                
                <div class="quiz-options">
                    <div class="quiz-option" onclick="checkAnswer('A')">A</div>
                    <div class="quiz-option" onclick="checkAnswer('H')">H</div>
                    <div class="quiz-option" onclick="checkAnswer('C')">C</div>
                    <div class="quiz-option" onclick="checkAnswer('G')">G</div>
                </div>
                
                <div class="quiz-result" id="quiz-result"></div>
                
                <button onclick="nextQuestion()" id="next-question-btn" style="display: none;">Next Question</button>
            </div>
            
            <button class="back-button" onclick="backToActivities()">Back to Activities</button>
            <button class="nav-button" onclick="window.location.href='index.html'">Home</button>
        </div>
    </div>
    
    <!-- Add the Tone.js library from CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js"></script>
    
    <script>
        // Initialize Tone.js synth for piano sounds
        const synth = new Tone.Synth().toDestination();
        
        // Map of note names to frequencies for accurate pitch
        const noteFrequencies = {
            'C': 'C4',
            'C#': 'C#4',
            'D': 'D4',
            'D#': 'D#4',
            'E': 'E4',
            'F': 'F4',
            'F#': 'F#4',
            'G': 'G4',
            'G#': 'G#4',
            'A': 'A4',
            'A#': 'A#4',
            'B': 'B4'
        };
        
        // Variables for quiz
        let currentQuestion = 0;
        let score = 0;
        
        // Quiz questions
        const quizQuestions = [
            {
                question: "Which of these is NOT a music note?",
                options: ["A", "H", "C", "G"],
                answer: "H"
            },
            {
                question: "Which instrument has keys like a piano but is blown into?",
                options: ["Flute", "Guitar", "Violin", "Drums"],
                answer: "Flute"
            },
            {
                question: "How many lines are on a standard music staff?",
                options: ["4", "5", "6", "7"],
                answer: "5"
            },
            {
                question: "Which note comes after G in the musical alphabet?",
                options: ["A", "B", "C", "H"],
                answer: "A"
            },
            {
                question: "What does 'forte' mean in music?",
                options: ["Soft", "Loud", "Fast", "Slow"],
                answer: "Loud"
            }
        ];
        
        // Instrument information
        const instrumentInfo = {
            piano: "The piano is a keyboard instrument that produces sound when the keys are pressed, which cause hammers to strike strings.",
            guitar: "The guitar is a string instrument with a flat body and a long neck with frets. It typically has six strings.",
            violin: "The violin is a wooden string instrument played with a bow. It has four strings and is the smallest member of the string family.",
            drums: "Drums are percussion instruments consisting of a hollow shell covered with a membrane (drumhead) that is struck with hands or sticks.",
            flute: "The flute is a woodwind instrument that produces sound when air is blown across an opening.",
            trumpet: "The trumpet is a brass instrument that produces sound when the player buzzes their lips into a mouthpiece."
        };
        
        // Notes positions on staff (top position in pixels)
        const notePositions = {
            "C": 180,
            "D": 160,
            "E": 140,
            "F": 120,
            "G": 100,
            "A": 80,
            "B": 60,
            "C2": 40
        };

        // Function to initialize audio context on user interaction
        document.addEventListener('click', function initAudio() {
            // Start audio context on first user interaction
            if (Tone.context.state !== 'running') {
                Tone.context.resume();
            }
            // Remove this event listener after first click
            document.removeEventListener('click', initAudio);
        });
        
        // Show the selected activity
        function showActivity(activityId) {
            // Hide all activity content
            document.querySelectorAll('.activity-content').forEach(element => {
                element.style.display = 'none';
            });
            
            // Show selected activity
            document.getElementById(activityId + '-activity').style.display = 'block';
            
            // If quiz activity, reset quiz
            if (activityId === 'quiz') {
                resetQuiz();
            }
        }
        
        // Go back to activity selection
        function backToActivities() {
            // Hide all activity content
            document.querySelectorAll('.activity-content').forEach(element => {
                element.style.display = 'none';
            });
            
            // Show activity selection
            document.querySelector('.activities').style.display = 'flex';
        }
        
        // Play a piano note with sound
        function playNote(note) {
            // Remove active class from all keys
            document.querySelectorAll('.white-key, .black-key').forEach(key => {
                key.classList.remove('active');
            });
            
            // Add active class to clicked key
            const key = document.querySelector(`[data-note="${note}"]`);
            if (key) {
                key.classList.add('active');
            }
            
            // Update note display
            document.getElementById('note-display').textContent = `Note: ${note}`;
            
            // Play the note using Tone.js
            synth.triggerAttackRelease(noteFrequencies[note], '0.5s');
            
            // Remove active class after a delay
            setTimeout(() => {
                if (key) {
                    key.classList.remove('active');
                }
            }, 500);
        }
        
        // Play a simple song
        function playSong(song) {
            let notes = [];
            let timing = 500; // Time between notes in milliseconds
            
            if (song === 'Twinkle') {
                notes = ['C', 'C', 'G', 'G', 'A', 'A', 'G', 'F', 'F', 'E', 'E', 'D', 'D', 'C'];
            } else if (song === 'Mary') {
                notes = ['E', 'D', 'C', 'D', 'E', 'E', 'E', 'D', 'D', 'D', 'E', 'G', 'G', 'E', 'D', 'C'];
            }
            
            // Make sure audio context is running
            Tone.context.resume();
            
            // Play each note with delay
            notes.forEach((note, index) => {
                setTimeout(() => {
                    playNote(note);
                }, index * timing);
            });
        }
        
        // Show a random note on the staff
        function showRandomNote() {
            // Clear previous notes
            const staff = document.querySelector('.staff');
            const oldNotes = staff.querySelectorAll('.note');
            oldNotes.forEach(note => {
                staff.removeChild(note);
            });
            
            // Get random note
            const notes = ["C", "D", "E", "F", "G", "A", "B", "C2"];
            const randomNote = notes[Math.floor(Math.random() * notes.length)];
            
            // Create note element
            const note = document.createElement('div');
            note.classList.add('note');
            note.style.left = '185px'; // Center the note horizontally
            note.style.top = notePositions[randomNote] + 'px';
            staff.appendChild(note);
            
            // Update note display
            document.getElementById('staff-note-display').textContent = `This is note: ${randomNote === "C2" ? "C (higher octave)" : randomNote}`;
            
            // Play the sound of the note
            if (randomNote === "C2") {
                synth.triggerAttackRelease("C5", "0.5s");
            } else {
                synth.triggerAttackRelease(noteFrequencies[randomNote], "0.5s");
            }
        }

        // Function to play instrument sound (simplified for demo)
        function playInstrumentSound(instrument) {
            // Different synth settings for different instruments
            let synthSettings = {};
            
            switch(instrument) {
                case 'piano':
                    synthSettings = {
                        oscillator: { type: 'triangle' },
                        envelope: { attack: 0.01, decay: 0.1, sustain: 0.5, release: 1 }
                    };
                    break;
                case 'guitar':
                    synthSettings = {
                        oscillator: { type: 'fmsquare' },
                        envelope: { attack: 0.01, decay: 0.2, sustain: 0.3, release: 0.5 }
                    };
                    break;
                case 'violin':
                    synthSettings = {
                        oscillator: { type: 'sine' },
                        envelope: { attack: 0.1, decay: 0.3, sustain: 0.7, release: 0.8 }
                    };
                    break;
                case 'drums':
                    // Use noise synth for drums
                    const noise = new Tone.NoiseSynth().toDestination();
                    noise.triggerAttackRelease("8n");
                    return;
                case 'flute':
                    synthSettings = {
                        oscillator: { type: 'sine' },
                        envelope: { attack: 0.02, decay: 0.1, sustain: 0.9, release: 0.5 }
                    };
                    break;
                case 'trumpet':
                    synthSettings = {
                        oscillator: { type: 'square' },
                        envelope: { attack: 0.04, decay: 0.2, sustain: 0.6, release: 0.4 }
                    };
                    break;
            }
            
            // Create a synth with instrument-specific settings
            const instrumentSynth = new Tone.Synth(synthSettings).toDestination();
            instrumentSynth.triggerAttackRelease("C4", "0.5s");
        }
        
        // Show instrument information
        function showInstrumentInfo(instrument) {
            document.getElementById('instrument-info-display').textContent = instrumentInfo[instrument];
            
            // Play a sample sound of the instrument
            playInstrumentSound(instrument);
        }
        
        // Check quiz answer with sound feedback
        function checkAnswer(selectedAnswer) {
            const currentQuiz = quizQuestions[currentQuestion];
            const resultDisplay = document.getElementById('quiz-result');
            const nextButton = document.getElementById('next-question-btn');
            
            if (selectedAnswer === currentQuiz.answer) {
                resultDisplay.textContent = "Correct!";
                resultDisplay.className = "quiz-result correct";
                score++;
                
                // Play correct sound (happy chord)
                synth.triggerAttackRelease("C4", "8n");
                setTimeout(() => synth.triggerAttackRelease("E4", "8n"), 100);
                setTimeout(() => synth.triggerAttackRelease("G4", "8n"), 200);
            } else {
                resultDisplay.textContent = `Incorrect. The answer is ${currentQuiz.answer}.`;
                resultDisplay.className = "quiz-result incorrect";
                
                // Play incorrect sound
                synth.triggerAttackRelease("C4", "8n");
                setTimeout(() => synth.triggerAttackRelease("C#4", "8n"), 100);
            }
            
            // Disable options after answering
            document.querySelectorAll('.quiz-option').forEach(option => {
                option.style.pointerEvents = 'none';
            });
            
            // Show next button
            nextButton.style.display = 'block';
        }
        
        // Move to next question
        function nextQuestion() {
            currentQuestion++;
            
            if (currentQuestion < quizQuestions.length) {
                // Show next question
                updateQuizQuestion();
            } else {
                // Show final score
                document.getElementById('quiz-question').textContent = `Quiz Complete! Your score: ${score}/${quizQuestions.length}`;
                document.querySelector('.quiz-options').style.display = 'none';
                document.getElementById('quiz-result').style.display = 'none';
                document.getElementById('next-question-btn').style.display = 'none';
                
                // Play completion sound based on score
                if (score >= quizQuestions.length * 0.7) {
                    // Play a happy chord progression for good score
                    const now = Tone.now();
                    synth.triggerAttackRelease("C4", "8n", now);
                    synth.triggerAttackRelease("E4", "8n", now + 0.1);
                    synth.triggerAttackRelease("G4", "8n", now + 0.2);
                    synth.triggerAttackRelease("C5", "4n", now + 0.3);
                } else {
                    // Play a simple sound for completion
                    synth.triggerAttackRelease("C4", "8n");
                    setTimeout(() => synth.triggerAttackRelease("E4", "8n"), 200);
                }
            }
        }
        
        // Update quiz question
        function updateQuizQuestion() {
            const currentQuiz = quizQuestions[currentQuestion];
            document.getElementById('quiz-question').textContent = currentQuiz.question;
            
            const optionElements = document.querySelectorAll('.quiz-option');
            for (let i = 0; i < optionElements.length; i++) {
                optionElements[i].textContent = currentQuiz.options[i];
                optionElements[i].style.pointerEvents = 'auto';
            }
            
            document.getElementById('quiz-result').textContent = '';
            document.getElementById('next-question-btn').style.display = 'none';
        }
        
        // Reset quiz
        function resetQuiz() {
            currentQuestion = 0;
            score = 0;
            updateQuizQuestion();
            document.querySelector('.quiz-options').style.display = 'flex';
            document.getElementById('quiz-result').style.display = 'block';
        }
    </script>
</body>
</html>